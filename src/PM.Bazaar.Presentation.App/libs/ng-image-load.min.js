function NgImageLoad(e){"use strict";var r="ngImageLoad";return e.module(r,[]).run(["NgImageLoadService",function(e){e.load()}]).directive("ngImageLoad",["NgImageLoadService",ngImageLoadDirective]).provider("NgImageLoadService",NgImageLoadServiceProvider),r}function ngImageLoadDirective(e){return{restrict:"A",scope:{ngImageLoad:"@",defaultImageKey:"@",defaultImageUrl:"@"},link:function(r,n,o){function t(e){a(),e&&i(e)}function a(){var n;n=r.defaultImageUrl?e.loadImage(r.defaultImageUrl):r.defaultImageKey?e.getImageByKey(r.defaultImageKey):e.getDefaultImage(),n.then(function(e){e?d||u(e):console.error("No default image provided")},function(e){})}function i(r){e.loadImage(r).then(function(e){d=!0,u(e)},function(e){})}function u(e){n.attr("src",e)}var g=r.ngImageLoad,d=!1;t(g),o.$observe("ngImageLoad",function(e){d=!1,t(e)})}}}function NgImageLoadServiceProvider(){function e(e){t.url=e}function r(e){a.push(e)}function n(e){for(var n=0;n<e.length;n++)r(e[n])}function o(e){function r(){t.url&&(t.promise=n(t.url));for(var e=0;e<a.length;e++)a[e].promise=n(a[e].url)}function n(r){var n=e.defer();if(r){var o=new Image;o.addEventListener("load",function(){n.resolve(r)}),o.addEventListener("error",function(e){n.reject(e)}),o.src=r}else n.reject("parameter 'url' not provided");return n.promise}function o(e){for(var r=[],o=0;o<e.length;o++)r.push(n(e[o]));return r}function i(r){var n=e.defer(),o=!1;if(r){for(var t=0;t<a.length;t++)if(a[t].hasOwnProperty("key")&&a[t].key===r){o=!0,a[t].promise.then(n.resolve,n.reject);break}o===!1&&n.reject("no image exist with key '"+r+"'")}else n.reject("parameter 'key' not provided");return n.promise}function u(e){for(var r=[],n=0;n<e.length;n++)r.push(i(e[n]));return r}function g(){var r=e.defer();return t.promise?t.promise.then(r.resolve,r.reject):r.reject("default image url not provided"),r.promise}return{load:r,loadImage:n,loadImages:o,getImageByKey:i,getImagesByKey:u,getDefaultImage:g}}var t={url:"",promise:null},a=[];return{$get:["$q",o],setDefault:e,preloadImage:r,preloadImages:n}}!function(e,r){"use strict";if("function"==typeof define&&define.amd)define(["angular"],r);else{if("undefined"==typeof module||"object"!=typeof module.exports)return r(e.angular);module.exports=r(require("angular"))}}(this,NgImageLoad);